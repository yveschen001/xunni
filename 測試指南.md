# ğŸ§ª Telegram Bot æ¸¬è©¦æŒ‡å—

## ğŸš€ **å¿«é€Ÿæ¸¬è©¦**

### **æ­¥é©Ÿ 1: å•Ÿå‹• Bot**

æ‰“é–‹çµ‚ç«¯ï¼Œé‹è¡Œï¼š

```bash
cd /Users/yichen/Downloads/cursor/XunNi
pnpm dev:polling
```

ä½ æœƒçœ‹åˆ°ï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ¤– XunNi Bot - Local Development (Polling Mode)     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Environment: development
ğŸ”‘ Bot Token: 8226418094:AAE5wfp_A...
ğŸ—„ï¸  Database: Mock (no persistence)
ğŸ”„ Mode: Long Polling (30s timeout)

ğŸ”§ Removing webhook to enable polling...
âœ… Webhook removed successfully
ğŸš€ Starting to poll for updates...
ğŸ’¡ Send a message to your bot to test!

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### **æ­¥é©Ÿ 2: æ‰“é–‹ Telegram**

1. æ‰“é–‹ Telegram Appï¼ˆæ‰‹æ©Ÿæˆ–é›»è…¦ï¼‰
2. æœç´¢ä½ çš„ Botï¼ˆæ ¹æ“šä½ çš„ Tokenï¼‰
3. æˆ–è€…ç›´æ¥é»æ“Šä¹‹å‰çš„å°è©±

### **æ­¥é©Ÿ 3: ç™¼é€æ¸¬è©¦æ¶ˆæ¯**

è©¦è©¦é€™äº›å‘½ä»¤ï¼š

```
/start
```

```
/help
```

```
Hello Bot!
```

```
ä½ å¥½
```

### **æ­¥é©Ÿ 4: æŸ¥çœ‹çµ‚ç«¯è¼¸å‡º**

æ¯ç™¼é€ä¸€æ¢æ¶ˆæ¯ï¼Œçµ‚ç«¯æœƒç«‹å³é¡¯ç¤ºï¼š

```
ğŸ“¬ Received 1 update(s) (Total: 1)

ğŸ“¨ Processing update 123456789
   From: Yichen (@yichen)
   Text: /start
âœ… Update processed successfully

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ“Š **æ—¥èªŒæŸ¥çœ‹æ–¹å¼**

### **æ–¹å¼ 1: çµ‚ç«¯å¯¦æ™‚æŸ¥çœ‹** â­ æœ€ç°¡å–®

```bash
pnpm dev:polling
```

æ‰€æœ‰æ—¥èªŒç›´æ¥é¡¯ç¤ºåœ¨çµ‚ç«¯ï¼

### **æ–¹å¼ 2: ä¿å­˜åˆ°æ–‡ä»¶**

```bash
# ä¿å­˜æ‰€æœ‰æ—¥èªŒ
pnpm dev:polling 2>&1 | tee bot-log.txt

# ç„¶å¾Œåœ¨å¦ä¸€å€‹çµ‚ç«¯æŸ¥çœ‹
tail -f bot-log.txt
```

### **æ–¹å¼ 3: åªçœ‹éŒ¯èª¤**

```bash
pnpm dev:polling 2>&1 | grep "âŒ"
```

### **æ–¹å¼ 4: ä½¿ç”¨ VS Code æŸ¥çœ‹**

```bash
# ä¿å­˜æ—¥èªŒåˆ°æ–‡ä»¶
pnpm dev:polling > bot.log 2>&1

# ç„¶å¾Œåœ¨ VS Code ä¸­æ‰“é–‹ bot.log
code bot.log
```

---

## ğŸ¯ **æ¸¬è©¦å ´æ™¯**

### **å ´æ™¯ 1: æ¸¬è©¦åŸºæœ¬å‘½ä»¤**

```bash
# 1. å•Ÿå‹• Bot
pnpm dev:polling

# 2. åœ¨ Telegram ç™¼é€
/start
/help
/profile

# 3. æŸ¥çœ‹çµ‚ç«¯è¼¸å‡º
# æœƒé¡¯ç¤ºæ¯å€‹å‘½ä»¤çš„è™•ç†éç¨‹
```

### **å ´æ™¯ 2: æ¸¬è©¦éŒ¯èª¤è™•ç†**

```bash
# 1. å•Ÿå‹• Bot
pnpm dev:polling

# 2. åœ¨ Telegram ç™¼é€ä¸€å€‹ä¸å­˜åœ¨çš„å‘½ä»¤
/nonexistent_command

# 3. æŸ¥çœ‹çµ‚ç«¯
# æœƒé¡¯ç¤ºéŒ¯èª¤ä¿¡æ¯å’Œ Stack Trace
```

### **å ´æ™¯ 3: æ¸¬è©¦é•·æ¶ˆæ¯**

```bash
# 1. å•Ÿå‹• Bot
pnpm dev:polling

# 2. åœ¨ Telegram ç™¼é€ä¸€æ®µé•·æ–‡å­—
é€™æ˜¯ä¸€æ®µå¾ˆé•·å¾ˆé•·çš„æ–‡å­—...

# 3. æŸ¥çœ‹çµ‚ç«¯
# æœƒé¡¯ç¤ºæ¶ˆæ¯çš„å‰ 50 å€‹å­—ç¬¦
```

### **å ´æ™¯ 4: æ¸¬è©¦æŒ‰éˆ•é»æ“Š**

```bash
# 1. å•Ÿå‹• Bot
pnpm dev:polling

# 2. åœ¨ Telegram ç™¼é€æœƒé¡¯ç¤ºæŒ‰éˆ•çš„å‘½ä»¤
/start

# 3. é»æ“ŠæŒ‰éˆ•

# 4. æŸ¥çœ‹çµ‚ç«¯
# æœƒé¡¯ç¤º callback_query çš„è™•ç†
```

---

## ğŸ” **æ—¥èªŒå…§å®¹èªªæ˜**

### **æ­£å¸¸æ—¥èªŒæ ¼å¼ï¼š**

```
ğŸ“¬ Received 1 update(s) (Total: 1)
â†‘ æ”¶åˆ°æ›´æ–°æ•¸é‡ï¼Œç¸½è¨ˆæ•¸é‡

ğŸ“¨ Processing update 123456789
â†‘ æ›´æ–° ID

   From: Yichen (@yichen)
   â†‘ ç”¨æˆ¶ä¿¡æ¯

   Text: /start
   â†‘ æ¶ˆæ¯å…§å®¹ï¼ˆå‰ 50 å­—ç¬¦ï¼‰

âœ… Update processed successfully
â†‘ è™•ç†çµæœ
```

### **éŒ¯èª¤æ—¥èªŒæ ¼å¼ï¼š**

```
âŒ Error processing update: Error: Something went wrong
â†‘ éŒ¯èª¤é¡å‹

   Error message: Cannot read property 'id' of null
   â†‘ è©³ç´°éŒ¯èª¤ä¿¡æ¯

   Stack: Error: Something went wrong
       at functionName (file.ts:123:45)
       at anotherFunction (file2.ts:67:89)
   â†‘ å®Œæ•´çš„èª¿ç”¨æ£§
```

---

## ğŸ’¡ **å¸¸è¦‹å•é¡Œ**

### **Q1: ç™¼é€æ¶ˆæ¯å¾Œæ²’æœ‰åæ‡‰ï¼Ÿ**

**æª¢æŸ¥æ¸…å–®ï¼š**

1. âœ… ç¢ºèª Bot æ­£åœ¨é‹è¡Œï¼ˆçµ‚ç«¯é¡¯ç¤º "Starting to poll for updates..."ï¼‰
2. âœ… ç¢ºèªç™¼é€æ¶ˆæ¯åˆ°æ­£ç¢ºçš„ Bot
3. âœ… æª¢æŸ¥ç¶²çµ¡é€£æ¥
4. âœ… æŸ¥çœ‹çµ‚ç«¯æ˜¯å¦æœ‰éŒ¯èª¤ä¿¡æ¯

**æ¸¬è©¦ Token æ˜¯å¦æœ‰æ•ˆï¼š**

```bash
curl "https://api.telegram.org/bot8226418094:AAE5wfp_AvKW36yqya502hUEJQIdSDrYJzM/getMe"
```

### **Q2: çµ‚ç«¯æ²’æœ‰é¡¯ç¤ºæ—¥èªŒï¼Ÿ**

**å¯èƒ½åŸå› ï¼š**

1. Bot æ²’æœ‰å•Ÿå‹•æˆåŠŸ
2. ç’°å¢ƒè®Šæ•¸æœªåŠ è¼‰
3. Token éŒ¯èª¤

**è§£æ±ºæ–¹æ¡ˆï¼š**

```bash
# æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
cat .dev.vars | grep TELEGRAM_BOT_TOKEN

# é‡æ–°å•Ÿå‹•
pnpm dev:polling
```

### **Q3: å¦‚ä½•æŸ¥çœ‹æ­·å²æ—¥èªŒï¼Ÿ**

å¦‚æœä½ ä½¿ç”¨äº† `tee` ä¿å­˜æ—¥èªŒï¼š

```bash
# æŸ¥çœ‹å®Œæ•´æ—¥èªŒ
cat bot-log.txt

# æœç´¢ç‰¹å®šç”¨æˆ¶
grep "Yichen" bot-log.txt

# æœç´¢éŒ¯èª¤
grep "âŒ" bot-log.txt

# æŸ¥çœ‹æœ€å¾Œ 100 è¡Œ
tail -100 bot-log.txt
```

### **Q4: æ—¥èªŒå¤ªå¤šï¼Œå¦‚ä½•éæ¿¾ï¼Ÿ**

```bash
# åªçœ‹éŒ¯èª¤
pnpm dev:polling 2>&1 | grep "âŒ"

# åªçœ‹æˆåŠŸçš„è™•ç†
pnpm dev:polling 2>&1 | grep "âœ…"

# åªçœ‹ç‰¹å®šç”¨æˆ¶
pnpm dev:polling 2>&1 | grep "Yichen"

# åªçœ‹ç‰¹å®šå‘½ä»¤
pnpm dev:polling 2>&1 | grep "/start"
```

---

## ğŸ¨ **é€²éšæ—¥èªŒæŠ€å·§**

### **æŠ€å·§ 1: å½©è‰²æ—¥èªŒ**

çµ‚ç«¯å·²ç¶“ä½¿ç”¨äº† Emoji ä¾†å€åˆ†ä¸åŒé¡å‹çš„æ—¥èªŒï¼š

- ğŸ“¬ = æ”¶åˆ°æ›´æ–°
- ğŸ“¨ = æ­£åœ¨è™•ç†
- âœ… = æˆåŠŸ
- âŒ = éŒ¯èª¤
- ğŸ”§ = é…ç½®/è¨­ç½®
- ğŸ’¡ = æç¤ºä¿¡æ¯

### **æŠ€å·§ 2: å¤šçµ‚ç«¯æŸ¥çœ‹**

```bash
# çµ‚ç«¯ 1: é‹è¡Œ Bot ä¸¦ä¿å­˜æ—¥èªŒ
pnpm dev:polling 2>&1 | tee bot-log.txt

# çµ‚ç«¯ 2: å¯¦æ™‚æŸ¥çœ‹æ—¥èªŒ
tail -f bot-log.txt

# çµ‚ç«¯ 3: æœç´¢éŒ¯èª¤
watch -n 1 "grep 'âŒ' bot-log.txt | tail -10"
```

### **æŠ€å·§ 3: æ—¥èªŒåˆ†æ**

```bash
# çµ±è¨ˆè™•ç†çš„æ¶ˆæ¯æ•¸é‡
grep "Processing update" bot-log.txt | wc -l

# çµ±è¨ˆéŒ¯èª¤æ•¸é‡
grep "âŒ" bot-log.txt | wc -l

# æŸ¥çœ‹æœ€å¸¸è¦‹çš„éŒ¯èª¤
grep "Error message:" bot-log.txt | sort | uniq -c | sort -rn

# æŸ¥çœ‹æœ€æ´»èºçš„ç”¨æˆ¶
grep "From:" bot-log.txt | sort | uniq -c | sort -rn
```

---

## ğŸ¯ **æ¸¬è©¦æ¸…å–®**

åœ¨é–‹ç™¼æ–°åŠŸèƒ½å‰ï¼Œå»ºè­°æ¸¬è©¦ä»¥ä¸‹å…§å®¹ï¼š

### **åŸºæœ¬åŠŸèƒ½æ¸¬è©¦ï¼š**

- [ ] `/start` - å•Ÿå‹•å‘½ä»¤
- [ ] `/help` - å¹«åŠ©å‘½ä»¤
- [ ] `/profile` - å€‹äººè³‡æ–™
- [ ] ç™¼é€æ™®é€šæ–‡å­—æ¶ˆæ¯
- [ ] é»æ“ŠæŒ‰éˆ•
- [ ] ç™¼é€é•·æ¶ˆæ¯
- [ ] ç™¼é€ç‰¹æ®Šå­—ç¬¦

### **éŒ¯èª¤è™•ç†æ¸¬è©¦ï¼š**

- [ ] ç™¼é€ä¸å­˜åœ¨çš„å‘½ä»¤
- [ ] ç™¼é€ç©ºæ¶ˆæ¯
- [ ] å¿«é€Ÿé€£çºŒç™¼é€å¤šæ¢æ¶ˆæ¯
- [ ] ç™¼é€è¶…é•·æ¶ˆæ¯

### **æ—¥èªŒæª¢æŸ¥ï¼š**

- [ ] ç¢ºèªæ‰€æœ‰æ¶ˆæ¯éƒ½è¢«è¨˜éŒ„
- [ ] ç¢ºèªéŒ¯èª¤ä¿¡æ¯æ¸…æ™°
- [ ] ç¢ºèª Stack Trace å®Œæ•´
- [ ] ç¢ºèªç”¨æˆ¶ä¿¡æ¯æ­£ç¢º

---

## ğŸ“š **ç›¸é—œæ–‡æª”**

- `é–‹å§‹ä½¿ç”¨.md` - å¿«é€Ÿé–‹å§‹æŒ‡å—
- `æœ¬åœ°é–‹ç™¼æŒ‡å—.md` - å®Œæ•´é–‹ç™¼æŒ‡å—
- `æœ¬åœ°é–‹ç™¼ç’°å¢ƒå·²å°±ç·’.md` - ç’°å¢ƒé…ç½®

---

## ğŸ‰ **ç¸½çµ**

### âœ… **æ—¥èªŒæŸ¥çœ‹æ–¹å¼ï¼š**

1. **çµ‚ç«¯å¯¦æ™‚æŸ¥çœ‹**ï¼ˆæœ€ç°¡å–®ï¼‰
   ```bash
   pnpm dev:polling
   ```

2. **ä¿å­˜åˆ°æ–‡ä»¶**
   ```bash
   pnpm dev:polling 2>&1 | tee bot-log.txt
   ```

3. **åªçœ‹éŒ¯èª¤**
   ```bash
   pnpm dev:polling 2>&1 | grep "âŒ"
   ```

### ğŸš€ **ç«‹å³æ¸¬è©¦ï¼š**

```bash
# 1. å•Ÿå‹• Bot
pnpm dev:polling

# 2. åœ¨ Telegram ç™¼é€æ¶ˆæ¯
/start

# 3. æŸ¥çœ‹çµ‚ç«¯è¼¸å‡º
# æœƒç«‹å³é¡¯ç¤ºè™•ç†éç¨‹ï¼
```

---

**Happy Testing! ğŸ§ª**

